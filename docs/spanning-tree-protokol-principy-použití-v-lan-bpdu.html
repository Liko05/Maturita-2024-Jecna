<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-05-12T03:09:13.8424779"><title>Spanning tree protokol, principy, použit&iacute; v LAN, BPDU | Maturita</title><script type="application/json" id="virtual-toc-data">[{"id":"spanning-tree-protokol","level":0,"title":"Spanning tree protokol","anchor":"#spanning-tree-protokol"},{"id":"as","level":0,"title":"Čas","anchor":"#as"},{"id":"rapid-stp-rsp-ieee-802-1w","level":0,"title":"Rapid STP(RSP) IEEE 802.1w","anchor":"#rapid-stp-rsp-ieee-802-1w"},{"id":"zm-na-v-port-stavech","level":0,"title":"Změna v port stavech","anchor":"#zm-na-v-port-stavech"},{"id":"zm-na-v-port-rol-ch","level":0,"title":"Změna v port rolích","anchor":"#zm-na-v-port-rol-ch"},{"id":"backup-port","level":0,"title":"Backup port","anchor":"#backup-port"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Spanning tree protokol, principy, použit&iacute; v LAN, BPDU | Maturita"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Maturita Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//20.24/spanning-tree-protokol-principy-použití-v-lan-bpdu.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Spanning tree protokol, principy, použit&iacute; v LAN, BPDU | Maturita"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//20.24/spanning-tree-protokol-principy-použití-v-lan-bpdu.html#webpage",
    "url": "writerside-documentation//20.24/spanning-tree-protokol-principy-použití-v-lan-bpdu.html",
    "name": "Spanning tree protokol, principy, použit&iacute; v LAN, BPDU | Maturita",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Maturita Help"
}</script><!-- End Schema.org --></head><body data-id="Spanning-tree-protokol-principy-použití-v-LAN-BPDU" data-main-title="Spanning tree protokol, principy, použití v LAN, BPDU" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Questions.md|PSS"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Maturita 20.24 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Spanning-tree-protokol-principy-použití-v-LAN-BPDU" id="Spanning-tree-protokol-principy-použití-v-LAN-BPDU.md">Spanning tree protokol, principy, použití v LAN, BPDU</h1><section class="chapter"><h2 id="spanning-tree-protokol" data-toc="spanning-tree-protokol">Spanning tree protokol</h2><ul class="list _bullet" id="cxocwz_410"><li class="list__item" id="cxocwz_411"><p>standartizov&aacute;n jako IEEE 802.1D</p></li><li class="list__item" id="cxocwz_412"><p>Jedn&aacute; se o s&iacute;ťov&yacute; protokol kter&yacute; v ethernetov&yacute;ch LAN s&iacute;t&iacute; zabraňuje potažmo odstraňuje smyčky. T&iacute;m způsobem že redundantn&iacute; spoje odpoj&iacute; což předch&aacute;z&iacute; zahlcen&iacute; s&iacute;tě při nekonečn&eacute;m kolov&aacute;n&iacute; paketů. Spanning tree tak&eacute; dok&aacute;že zablokovan&yacute; spoj povolit za předpokladu že povolen&yacute; byl odebr&aacute;n a zablokovan&yacute; je jedin&yacute; dal&scaron;&iacute; relevantn&iacute; spoj.</p></li></ul><section class="chapter"><h3 id="probl-my" data-toc="probl-my">Probl&eacute;my:</h3><ul class="list _bullet" id="cxocwz_413"><li class="list__item" id="cxocwz_414"><p>Přech&aacute;z&iacute; probl&eacute;mu nazvan&yacute; Broadcast Storm, kter&yacute; může zahltit s&iacute;ť a znemožnit jej&iacute; dal&scaron;&iacute; fungov&aacute;n&iacute;. Může k němu doj&iacute;t při pos&iacute;l&aacute;n&iacute; unicast frameu za předpokladu že nefunguje spanning tree protokol bude MAC adresy do nekonečna přepisovat protože switch nev&iacute; jak&yacute; port poslal unicast frame.</p></li></ul></section><section class="chapter"><h3 id="princip-algoritmu" data-toc="princip-algoritmu">Princip algoritmu:</h3><ul class="list _bullet" id="cxocwz_415"><li class="list__item" id="cxocwz_416"><p id="cxocwz_417">Elect the root bridge.</p></li><li class="list__item" id="cxocwz_418"><p id="cxocwz_419">V&scaron;echny switche v pods&iacute;ti se &uacute;častn&iacute; volen&iacute;. Pot&eacute; jak switch nabootuje začne rozes&iacute;lat BPDU frame každ&eacute; dvě vteřiny.</p><ul class="list _bullet" id="cxocwz_420"><li class="list__item" id="cxocwz_421"><p>Bridge protocol Data Units - Switche pomoc&iacute; nich sd&iacute;l&iacute; informace o nich samotn&yacute;ch a o jejich připojen&iacute;. Využ&iacute;vaj&iacute; se při volbě root bridge, root ports, designated ports, and alternate ports. Každ&yacute; BPDU obsahuje bridge ID (BID) = kter&eacute; obsahuje priority value, an extended system ID, and the MAC address of the switch </p><figure id="cxocwz_422"><img alt="BID.png" src="images/BID.png" title="BID.png" width="570" height="243"></figure></li></ul></li><li class="list__item" id="cxocwz_423"><p id="cxocwz_424">Switch s nejmen&scaron;&iacute;m Bridge priority v&iacute;těz&iacute;, ov&scaron;em defaultně maj&iacute; prioritu v&scaron;echny switche nastaven&eacute; na jednu hodnotu (u cisco switche se jedn&aacute; o 32768 z rozsahu 0 to 61440 kde se přid&aacute;v&aacute; po 4096). V tu chv&iacute;li připad&aacute; v potaz Extended System ID kter&eacute; identifikuje VLAN ve kter&eacute; se dan&yacute; BPDU nach&aacute;z&iacute;. Pokud jsou i tyto č&iacute;sla stejn&eacute; n&aacute;sledně se porovn&aacute;v&aacute; jejich MAC adresa. Znovu ten kdo m&aacute; nejniž&scaron;&iacute; ten vyhr&aacute;v&aacute;.</p><ul class="list _bullet" id="cxocwz_425"><li class="list__item" id="cxocwz_426"><p>Bridge priority to exact value -&gt; <code class="code" id="cxocwz_427">switch(config)#spanning-tree vlan 1 priority 8192</code></p></li><li class="list__item" id="cxocwz_428"><p>Bridge priority to 28673 -&gt; <code class="code" id="cxocwz_429">switch(config)#spanning-tree vlan 1 root secondary</code></p></li><li class="list__item" id="cxocwz_430"><p>Bridge priority to 24577 -&gt; <code class="code" id="cxocwz_431">switch(config)#spanning-tree vlan 1 root primary</code></p></li><li class="list__item" id="cxocwz_432"><p>Pro zobrazen&iacute; priorit -&gt; <code class="code" id="cxocwz_433">switch(config)#do show spanning-tree</code></p></li></ul></li><li class="list__item" id="cxocwz_434"><p id="cxocwz_435">Nejprve se každ&yacute; switch prohl&aacute;s&iacute; za root bridge ale postupně swithce zji&scaron;ťuj&iacute; kdo m&aacute; vy&scaron;&scaron;&iacute; prioritu než oni a jejich BPDU n&aacute;sledně rozes&iacute;laj&iacute; dokud se nedohodnou na jednom switchy.</p><ul class="list _bullet" id="cxocwz_436"><li class="list__item" id="cxocwz_437"><p>Elect the root ports.</p></li></ul></li><li class="list__item" id="cxocwz_438"><p id="cxocwz_439">Jak je odhlasov&aacute;n root bridge STA algoritmus je použit pro vybr&aacute;n&iacute; root portů. Každ&yacute; switch vyjma root switche vybere jeden ze sv&yacute;ch portů kter&yacute; je nejbl&iacute;že k switchy (M&aacute; nejniž&scaron;&iacute; path cost) a označ&iacute; ho jako root port.</p><ul class="list _bullet" id="cxocwz_440"><li class="list__item" id="cxocwz_441"><p>Path cost - STA algoritmus začne zji&scaron;ťovat nejv&yacute;hodněj&scaron;&iacute; cestu z jednotliv&yacute;ch portů switche až k root bridge. Tato cesta zn&aacute;m&aacute; pod n&aacute;zvem internal root path cost je vypočtena jako součet v&scaron;ech individu&aacute;ln&iacute;ch cen portů během cesty od switche až k root brigy. Když switch obdrž&iacute; BPDU přičte cenu vstupn&iacute;ho portu pro vypočten&iacute; celkov&eacute; hodnoty. Hodnota portů je přenastaviteln&aacute;.</p></li></ul><div class="table-wrapper"><table class="wide" id="cxocwz_442"><thead><tr class="ijRowHead" id="cxocwz_443"><th id="cxocwz_444"><p>Link Speed</p></th><th id="cxocwz_445"><p>STP Cost: IEEE</p><br><p> 802.1D-1998</p></th><th id="cxocwz_447"><p>RSTP Cost: IEEE </p><br><p> 802.1w-2004</p></th></tr></thead><tbody><tr id="cxocwz_449"><td id="cxocwz_450"><p>10 Gbps</p></td><td id="cxocwz_451"><p>2</p></td><td id="cxocwz_452"><p>2,000</p></td></tr><tr id="cxocwz_453"><td id="cxocwz_454"><p>1 Gbps</p></td><td id="cxocwz_455"><p>4</p></td><td id="cxocwz_456"><p>20,000</p></td></tr><tr id="cxocwz_457"><td id="cxocwz_458"><p>100 Mbps</p></td><td id="cxocwz_459"><p>19</p></td><td id="cxocwz_460"><p>200,000</p></td></tr><tr id="cxocwz_461"><td id="cxocwz_462"><p>10 Mbps</p></td><td id="cxocwz_463"><p>100</p></td><td id="cxocwz_464"><p>2,000,000</p></td></tr></tbody></table></div><figure id="cxocwz_465"><img alt="path-cost.png" src="images/path-cost.png" title="path-cost.png" width="572" height="335"></figure><ul class="list _bullet" id="cxocwz_466"><li class="list__item" id="cxocwz_467"><p>Elect designated Ports.</p></li></ul></li><li class="list__item" id="cxocwz_468"><p id="cxocwz_469">Každ&yacute; segment mezi dvěmi switchy mus&iacute; m&iacute;t jeden designated port. Designated porty jsou porty, kter&eacute; jsou na nejlep&scaron;&iacute; cestě přijmout traffic do root bridge.</p><ul class="list _bullet" id="cxocwz_470"><li class="list__item" id="cxocwz_471"><p>V&scaron;echny porty na root bridgy jsou designated</p></li><li class="list__item" id="cxocwz_472"><p>Pokud na jednom konci je root port to znamen&aacute; že na druh&eacute;m konci mus&iacute; b&yacute;t designated port.</p></li><li class="list__item" id="cxocwz_473"><p>Pokud nen&iacute; mezi dvěma switchy ani jeden root port. V tom př&iacute;padě mus&iacute;me doj&iacute;t k rozhodnut&iacute; jinou cestou a to buď kdo m&aacute; z dvou switchu men&scaron;&iacute; internal root path cost. A pokud ani tak nemůžeme rozhodnout n&aacute;sledně můžeme vyře&scaron;it stejně jako volen&iacute; root bridge a to porovn&aacute;n&iacute; BPDU informac&iacute;.</p></li><li class="list__item" id="cxocwz_474"><p>Pokud nerozhodne BPDU může rozhodnout, port priorita nebo v posledn&iacute; řadě port ID </p><figure id="cxocwz_475"><img alt="designated-root-ports.png" src="images/designated-root-ports.png" title="designated-root-ports.png" width="571" height="420"></figure></li></ul></li><li class="list__item" id="cxocwz_476"><p id="cxocwz_477">Elect Alternate (blocked) ports.</p><ul class="list _bullet" id="cxocwz_478"><li class="list__item" id="cxocwz_479"><p>Pokud port nen&iacute; root nebo designated port stane se z něj alternated port. Alternate porty a backup porty jsou odstraněny či zablokov&aacute;ny abych přech&aacute;zeli smyčk&aacute;m. </p><figure id="cxocwz_480"><img alt="blocked-alternate-ports.png" src="images/blocked-alternate-ports.png" title="blocked-alternate-ports.png" width="573" height="400"></figure></li></ul></li></ul></section></section><section class="chapter"><h2 id="as" data-toc="as">Čas</h2><ul class="list _bullet" id="cxocwz_481"><li class="list__item" id="cxocwz_482"><p>Hello timer - The hello time is the interval between BPDUs. The default is 2 seconds but can be modified to between 1 and 10 seconds.</p></li><li class="list__item" id="cxocwz_483"><p>Forward Delay Timer - The forward delay is the time that is spent in the listening and learning state. The default is 15 seconds but can be modified to between 4 and 30 seconds.</p></li><li class="list__item" id="cxocwz_484"><p>Max Age Timer - The max age is the maximum length of time that a switch waits before attempting to change the STP topology. The default is 20 seconds but can be modified between 6 and 40 seconds.</p></li></ul><div class="table-wrapper"><table class="wide" id="cxocwz_485"><thead><tr class="ijRowHead" id="cxocwz_486"><th id="cxocwz_487"><p>Port state</p></th><th id="cxocwz_488"><p>Description</p></th></tr></thead><tbody><tr id="cxocwz_489"><td id="cxocwz_490"><p>Blocking</p></td><td id="cxocwz_491"><p>The port is an alternate port and does not participate in frame forwarding. The port receives BPDU frames to determine the location and root ID of the root bridge. BPDU frames also determine which roles each switch port should assume in the final active STP topology. With a Max Age timer of 20 seconds, a switch port that has not received an expected BPDU from a neighbor switch will go into blocking state.</p></td></tr><tr id="cxocwz_492"><td id="cxocwz_493"><p>Listening</p></td><td id="cxocwz_494"><p>After the blocking state, a port will move to the listening state. The port receives BPDUs to determine the path to the root. The switch port also transmits its own BPDU frames and informs the adjacent switch that the switch port is preparing to participate in the active topology.</p></td></tr><tr id="cxocwz_495"><td id="cxocwz_496"><p>Learning</p></td><td id="cxocwz_497"><p>A switch port transitions to the learning state after the listening state. During the learning state, the switch port receives and processes BPDUs and prepares to participate in frame forwarding. It also begins to populate the MAC address table. However, in the learning state, user frames are not forwarded to the destination.</p></td></tr><tr id="cxocwz_498"><td id="cxocwz_499"><p>Forwarding</p></td><td id="cxocwz_500"><p>In the forwarding state, a switch port is considered part of the active topology. The switch port forwards user traffic and sends and receives BPDU frames.</p></td></tr><tr id="cxocwz_501"><td id="cxocwz_502"><p>Disabled</p></td><td id="cxocwz_503"><p>A switch port in the disabled state does not participate in spanning tree and does not forward frames. The disabled state is set when the switch port is administratively disabled.</p></td></tr></tbody></table></div><div class="table-wrapper"><table class="wide" id="cxocwz_504"><thead><tr class="ijRowHead" id="cxocwz_505"><th id="cxocwz_506"><p>Port State</p></th><th id="cxocwz_507"><p>BPDU</p></th><th id="cxocwz_508"><p>MAC Address Table</p></th><th id="cxocwz_509"><p>Forwarding Data Frames</p></th></tr></thead><tbody><tr id="cxocwz_510"><td id="cxocwz_511"><p>Blocking</p></td><td id="cxocwz_512"><p>Receive only</p></td><td id="cxocwz_513"><p>No Update</p></td><td id="cxocwz_514"><p>No</p></td></tr><tr id="cxocwz_515"><td id="cxocwz_516"><p>Listening</p></td><td id="cxocwz_517"><p>Receive and send</p></td><td id="cxocwz_518"><p>No Update</p></td><td id="cxocwz_519"><p>No</p></td></tr><tr id="cxocwz_520"><td id="cxocwz_521"><p>Learning</p></td><td id="cxocwz_522"><p>Receive and send</p></td><td id="cxocwz_523"><p>Updating table</p></td><td id="cxocwz_524"><p>No</p></td></tr><tr id="cxocwz_525"><td id="cxocwz_526"><p>Forwarding</p></td><td id="cxocwz_527"><p>Receive and send</p></td><td id="cxocwz_528"><p>Updating table</p></td><td id="cxocwz_529"><p>Yes</p></td></tr><tr id="cxocwz_530"><td id="cxocwz_531"><p>Disabled</p></td><td id="cxocwz_532"><p>None sent or received</p></td><td id="cxocwz_533"><p>No Update</p></td><td id="cxocwz_534"><p>No</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="rapid-stp-rsp-ieee-802-1w" data-toc="rapid-stp-rsp-ieee-802-1w">Rapid STP(RSP) IEEE 802.1w</h2><ul class="list _bullet" id="cxocwz_535"><li class="list__item" id="cxocwz_536"><p>Jedn&aacute; se o evoluci STP kter&aacute; je rychlej&scaron;&iacute;. Využ&iacute;v&aacute; stejn&yacute; algoritmus jako STP pro určen&iacute; root portů a topologie. Zvy&scaron;uje rychlost rekalkulace spanning tree pokud se topologie změn&iacute;.</p></li></ul></section><section class="chapter"><h2 id="zm-na-v-port-stavech" data-toc="zm-na-v-port-stavech">Změna v port stavech</h2><figure id="cxocwz_537"><img alt="zmena-v-port-stavech.png" src="images/zmena-v-port-stavech.png" title="zmena-v-port-stavech.png" width="608" height="618"></figure></section><section class="chapter"><h2 id="zm-na-v-port-rol-ch" data-toc="zm-na-v-port-rol-ch">Změna v port rol&iacute;ch</h2><figure id="cxocwz_538"><img alt="zmena-v-port-rolich.png" src="images/zmena-v-port-rolich.png" title="zmena-v-port-rolich.png" width="607" height="484"></figure></section><section class="chapter"><h2 id="backup-port" data-toc="backup-port">Backup port</h2><ul class="list _bullet" id="cxocwz_539"><li class="list__item" id="cxocwz_540"><p>As shown in the figure, the alternate port has an alternate path to the root bridge. The backup port is a backup to a shared medium, such as a hub. A backup port is less common because hubs are now considered legacy devices. </p><figure id="cxocwz_541"><img alt="backup-port.png" src="images/backup-port.png" title="backup-port.png" width="613" height="389"></figure></li></ul></section><div class="last-modified">Last modified: 12 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="static-dynamic-routing-rip-ospf.html" class="navigation-links__prev">Statick&eacute; i dynamick&eacute; směrov&aacute;n&iacute; na s&iacute;ti. (RIP, OSPF), konfigurace</a><a href="vlan-princip-použití-trunk-porty-protokol-802-1q-vtp-technologie.html" class="navigation-links__next">VLAN, princip, použit&iacute;. Trunk porty, protokol 802.1q, VTP technologie</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>