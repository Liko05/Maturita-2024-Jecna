<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-05-16T15:48:32.4796413"><title>HSRP, principy, funkce, použit&iacute;, konfigurace | Maturita</title><script type="application/json" id="virtual-toc-data">[{"id":"hsrp-hot-standby-router-protocol-rfc-2281","level":0,"title":"HSRP (Hot Standby Router Protocol) RFC 2281","anchor":"#hsrp-hot-standby-router-protocol-rfc-2281"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="HSRP, principy, funkce, použit&iacute;, konfigurace | Maturita"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Maturita Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation//20.24/hsrp-principy-funkce-použití-konfigurace.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="HSRP, principy, funkce, použit&iacute;, konfigurace | Maturita"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation//20.24/hsrp-principy-funkce-použití-konfigurace.html#webpage",
    "url": "writerside-documentation//20.24/hsrp-principy-funkce-použití-konfigurace.html",
    "name": "HSRP, principy, funkce, použit&iacute;, konfigurace | Maturita",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Maturita Help"
}</script><!-- End Schema.org --></head><body data-id="HSRP-principy-funkce-použití-konfigurace" data-main-title="HSRP, principy, funkce, použití, konfigurace" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Questions.md|PSS"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Maturita 20.24 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="HSRP-principy-funkce-použití-konfigurace" id="HSRP-principy-funkce-použití-konfigurace.md">HSRP, principy, funkce, použití, konfigurace</h1><section class="chapter"><h2 id="hsrp-hot-standby-router-protocol-rfc-2281" data-toc="hsrp-hot-standby-router-protocol-rfc-2281">HSRP (Hot Standby Router Protocol) RFC 2281</h2><p id="nl2kzz_2">Jedna se o Cisco proprietarni redundantni protokol pro zalozani a fault-tolerance default gateway. Verze 1 vznikla jiz v roce 1998 a byla popsana v RFC 2281. Verze 2 protokolu obsahuje nejaka vylepseni a podporu IPv6, ovsem neexistuje pro ni korespondujici RFC notace.</p><ul class="list _bullet" id="nl2kzz_3"><li class="list__item" id="nl2kzz_4"><p>Verze 2 krom toho ze podporuje IPv6 adresy navic prinasi, stabilitu, skalovatelnost a vylepsenou diagnostiku. Neni kompatibilni s 1 verzi HSRP. Zvysuje pocet HSRP groups z 256 na 4096.</p></li></ul><p id="nl2kzz_5">Protokol zalozi spojeni mezi routerama. V pripade ze jedna z default gateway prestane fungovat nahradi jeji funkcionalitu druha. HSRP gateway posila multicast hello message ostatnim gateways aby jim oznamila jejich prioritu (ktera gateway je preferovana) a aktualnim stavu (active nebo standby).</p><section class="chapter"><h3 id="princip" data-toc="princip">Princip</h3><p id="nl2kzz_6">Primarni router s nejvysi nastavenou prioritou se bude chovat jako virtualni router s preddefinovanou gateway IP adresou a bude odpovidat ARP a ND requestum od stroju pripojenych k LAN s vyuzitim sve virtualni MAC adresou (primarni gatewaye). Pokud primarni router by mel prestat odpovidat, router s druhou nejvetsi prioritou nez ma primarni router prevezme na sebe funkcionalitu defaultni gateway a sam se stane primarnim routrem. Na ARP a ND requesty bude stale odpovidat s vyuzitim stejne virtualni MAC adresy.</p><div class="table-wrapper"><table class="wide" id="nl2kzz_7"><thead><tr class="ijRowHead" id="nl2kzz_8"><th id="nl2kzz_9"><p>HSRP version</p></th><th id="nl2kzz_10"><p>IP protocol</p></th><th id="nl2kzz_11"><p>Group address</p></th><th id="nl2kzz_12"><p>UDP port</p></th><th id="nl2kzz_13"><p>Virtual MAC address range</p></th></tr></thead><tbody><tr id="nl2kzz_14"><td id="nl2kzz_15"><p>1</p></td><td id="nl2kzz_16"><p>IPv4</p></td><td id="nl2kzz_17"><p>224.0.0.2 (all routers)</p></td><td id="nl2kzz_18"><p>1985</p></td><td id="nl2kzz_19"><p>00:00:0c:07:ac:XX</p></td></tr><tr id="nl2kzz_20"><td id="nl2kzz_21"><p>2</p></td><td id="nl2kzz_22"><p>IPv4</p></td><td id="nl2kzz_23"><p>224.0.0.102(HSRP)</p></td><td id="nl2kzz_24"><p>1985</p></td><td id="nl2kzz_25"><p>00:00:0c:9f:fX:XX</p></td></tr><tr id="nl2kzz_26"><td id="nl2kzz_27"><p>2</p></td><td id="nl2kzz_28"><p>IPv6</p></td><td id="nl2kzz_29"><p>ff02::66</p></td><td id="nl2kzz_30"><p>2029</p></td><td id="nl2kzz_31"><p>00:05:73:a0:0X:XX</p></td></tr></tbody></table></div><p id="nl2kzz_32">Pismeno &quot;X&quot; ve virtualni MAC adrese reprezentuje group ID v hexu. HSRP neni routing protocol protoze zadnym zpusobem nijak nemeni nebo jinak neovlivnuje ip routing table.</p><p id="nl2kzz_33">HSRP je schopne vyvolat failover pokud jedno nebo vice zarizeni na routeru prestane fungovat.</p></section><section class="chapter"><h3 id="common-hsrp-problems" data-toc="common-hsrp-problems">Common HSRP problems</h3><ul class="list _bullet" id="nl2kzz_34"><li class="list__item" id="nl2kzz_35"><p>HSRP routers not being on the same network segment</p></li><li class="list__item" id="nl2kzz_36"><p>HSRP routers not configured with IP addresses from the same subnet</p></li><li class="list__item" id="nl2kzz_37"><p>HSRP configuration issues like standby groups and virtual IPs not matching on the HSRP routers.</p></li></ul></section><section class="chapter"><h3 id="hsrp-communication" data-toc="hsrp-communication">HSRP Communication</h3><ul class="list _bullet" id="nl2kzz_38"><li class="list__item" id="nl2kzz_39"><p>Hello: The hello message is sent between the active and standby devices (by default, every 3 seconds). If the standby device does not hear from the active device (via a hello message) in about 10 seconds, it will take over the active role.</p></li><li class="list__item" id="nl2kzz_40"><p>Resign: The resign message is sent by the active HSRP device when it is getting ready to go offline or relinquish the active role for some other reason. This message tells the standby router to be ready and take over the active role.</p></li><li class="list__item" id="nl2kzz_41"><p>Coup: The coup message is used when a standby router wants to assume the active role (preemption).</p></li></ul></section><section class="chapter"><h3 id="hsrp-states" data-toc="hsrp-states">HSRP states</h3><ul class="list _bullet" id="nl2kzz_42"><li class="list__item" id="nl2kzz_43"><p>Active: This is the state of the device that is actively forwarding traffic.</p></li><li class="list__item" id="nl2kzz_44"><p>Init or Disabled: This is the state of a device that is not yet ready or able to participate in HSRP.</p></li><li class="list__item" id="nl2kzz_45"><p>Learn: This is the state of a device that has not yet determined the virtual IP address and has not yet seen a hello message from an active device.</p></li><li class="list__item" id="nl2kzz_46"><p>Listen: This is the state of a device that is receiving hello messages.</p></li><li class="list__item" id="nl2kzz_47"><p>Speak: This is the state of a device that is sending and receiving hello messages.</p></li><li class="list__item" id="nl2kzz_48"><p>Standby: This is the state of a device that is prepared to take over the traffic forwarding duties from the active device.</p></li></ul></section><section class="chapter"><h3 id="konfigurace" data-toc="konfigurace">Konfigurace</h3><p id="nl2kzz_49">Defaultni priorita HSRP router je 100. Kdo ma vyssi prioritu stane se aktivnim routerem.</p><div class="table-wrapper"><table class="wide" id="nl2kzz_50"><thead><tr class="ijRowHead" id="nl2kzz_51"><th id="nl2kzz_52"><p>Step number</p></th><th id="nl2kzz_53"><p>Description</p></th><th id="nl2kzz_54"><p>Command</p></th></tr></thead><tbody><tr id="nl2kzz_55"><td id="nl2kzz_56"><p>1</p></td><td id="nl2kzz_57"><p>Enter privileged EXEC mode.</p></td><td id="nl2kzz_58"><p>router&gt;enable</p></td></tr><tr id="nl2kzz_59"><td id="nl2kzz_60"><p>2</p></td><td id="nl2kzz_61"><p>Enter global configuration mode</p></td><td id="nl2kzz_62"><p>router#configure terminal</p></td></tr><tr id="nl2kzz_63"><td id="nl2kzz_64"><p>3</p></td><td id="nl2kzz_65"><p>Enter interface configuration mode.</p></td><td id="nl2kzz_66"><p>router(config)#interface interface</p></td></tr><tr id="nl2kzz_67"><td id="nl2kzz_68"><p>4</p></td><td id="nl2kzz_69"><p>Configure an IP address on the interface.</p></td><td id="nl2kzz_70"><p>router(config-if)#ip address address netmask</p></td></tr><tr id="nl2kzz_71"><td id="nl2kzz_72"><p>5</p></td><td id="nl2kzz_73"><p>Configure an HSRP virtual IP address. </p><br><p> Note:If the group-numbers is not entered then it will default to a group number of 0. </p><br><p> The ip-address parameter is not required but does need to be entered on at least one HSRP device. The other devices are able to learn the virtual IP address from this device.</p></td><td id="nl2kzz_76"><p>router(config-if)#standy [group-number] ip [ip-address]</p></td></tr><tr id="nl2kzz_77"><td id="nl2kzz_78"><p>6</p></td><td id="nl2kzz_79"><p>Configure the HSRP priority (optional) </p><br><p> Note: If the group-number is not entered then it will default to a group number of 0. </p><br><p> The valid values for the priority are from 0 trough 255.</p></td><td id="nl2kzz_82"><p>router(config-if)#standby [group-number] priority priority</p></td></tr><tr id="nl2kzz_83"><td id="nl2kzz_84"><p>7</p></td><td id="nl2kzz_85"><p>Configure HSRP preemption (optional). </p><br><p> Preempt forces a router to be active after recovering from a failure.</p></td><td id="nl2kzz_87"><p>router(config-if)#standby [group-number] preempt</p></td></tr><tr id="nl2kzz_88"><td id="nl2kzz_89"><p>8</p></td><td id="nl2kzz_90"><p>Associated a tracked object to the HSRP group (optional). </p><br><p> Note: If the group-number is not entered, then it will default to a group number of 0. </p><br><p> By default, the decrement-value is 10; what this means is that the HSRP priority will go down by 10 if the object is not 'up'. </p><br><p> The shutdown parameter will disable the HSRP group if the tracked object goes down.</p></td><td id="nl2kzz_94"><p>router(config-if)#standby [group-number] track [object-number] object-number [decrement decrement-value] [shutdown]</p></td></tr><tr id="nl2kzz_95"><td id="nl2kzz_96"><p>9</p></td><td id="nl2kzz_97"><p>Create a tracked object (optional). </p><br><p> Note: The object-number can be any number between 1 and 1000. </p><br><p> The line-protocol parameter will track the protocol state of the configured interface. </p><br><p> The ip routing parameter will track the IP routing capability of an interface (is it configured with an IP address and operational).</p></td><td id="nl2kzz_101"><p>router(config)#track object-number interface interface</p></td></tr></tbody></table></div><p id="nl2kzz_102"><a href="https://community.cisco.com/t5/networking-knowledge-base/hsrp-overview-and-basic-configuration/ta-p/3131590" id="nl2kzz_103" data-external="true" rel="noopener noreferrer">Config guide</a></p></section><section class="chapter"><h3 id="advanced-hsrp-configuration-load-balancing" data-toc="advanced-hsrp-configuration-load-balancing">Advanced HSRP configuration - Load Balancing</h3><figure id="nl2kzz_104"><img alt="advanced-hsrp.png" src="images/advanced-hsrp.png" title="advanced-hsrp.png" width="848" height="807"></figure></section></section><div class="last-modified">Last modified: 16 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="etherchannel-principy-funkce-použití.html" class="navigation-links__prev">Etherchannel, principy, funkce, použit&iacute;</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>